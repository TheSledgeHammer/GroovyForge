buildscript {
	repositories {
		jcenter()
		mavenCentral()
		maven {
			name = "forge"
			url = "http://files.minecraftforge.net/maven"
		}
	}
	dependencies {
		classpath group: 'net.minecraftforge.gradle', name: 'ForgeGradle', version: '3.+', changing: true
	}
}

plugins {
	id 'groovy'
	id 'maven'

	//id "net.minecraftforge.gradle.forge" version "2.0.2"
}
apply plugin: 'net.minecraftforge.gradle'
apply plugin: 'eclipse'

group = 'com.thesledgehammer.groovyforge'
archivesBaseName = "GroovyForge_" + mcversion
version = version_major + '.' + version_minor + '.' + version_patch

sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8'

repositories {
	maven {
		name = "Apache Groovy"
		url = "https://mvnrepository.com/artifact/org.codehaus.groovy/groovy-all"
	}
	maven {
		name = "JAXB"
		url = "https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api"
	}
}

minecraft {
	//mappings channel: 'snapshot', version: mcp_mappings
	mappings channel: 'snapshot', version: '20180921-1.13'
	runs {
		client {
            workingDirectory project.file('run')
            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'
            property 'forge.logging.console.level', 'debug'

            mods {
                groovyforge {
                    source sourceSets.main
				}
            }
        }

        server {
            workingDirectory project.file('run')
            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'
            property 'forge.logging.console.level', 'debug'
            mods {
                groovyforge {
                    source sourceSets.main
                }
            }
        }
    }    
}

dependencies {
	//minecraft 'net.minecraftforge:forge:' + mcversion + '-' + forgeversion
	minecraft 'net.minecraftforge:forge:1.13.2-25.0.92'
	compile "org.codehaus.groovy:groovy-all:${groovy_version}"
	//compile "javax.xml.bind:jaxb-api:+"
}
/*
processResources {
	from(sourceSets.main.resources.srcDirs) {
		include 'mcmod.info'
		// replace version and mcversion
		expand 'version':project.version, 'mcversion':mcversion
	}
	from(sourceSets.main.resources.srcDirs) {
		exclude 'mcmod.info'
	}
}*/
